name: üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Project Board

on:
  workflow_dispatch:  # –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é

jobs:
  diagnose:
    runs-on: ubuntu-latest
    steps:
      - name: ü©∫ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        uses: actions/github-script@v6
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            console.log('=== ü©∫ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê ===');
            
            // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ–µ–∫—Ç—ã
            const projectsQuery = `query {
              user(login: "virusneo1997-del") {
                projectsV2(first: 5) {
                  nodes {
                    title
                    number
                    fields(first: 10) {
                      nodes {
                        ... on ProjectV2Field {
                          name
                        }
                        ... on ProjectV2SingleSelectField {
                          name
                          options {
                            name
                          }
                        }
                      }
                    }
                    items(first: 20) {
                      nodes {
                        fieldValues(first: 5) {
                          nodes {
                            ... on ProjectV2ItemFieldTextValue {
                              field { ... on ProjectV2FieldCommon { name } }
                              text
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }`;
            
            const result = await github.graphql(projectsQuery);
            const project = result.user.projectsV2.nodes[0];
            
            console.log('üìä –ü–†–û–ï–ö–¢:', project.title);
            console.log('üìã –ü–û–õ–Ø:', project.fields.nodes.map(f => f.name));
            console.log('üë• –°–¢–£–î–ï–ù–¢–´ –í –ü–†–û–ï–ö–¢–ï:');
            project.items.nodes.forEach(item => {
              const githubField = item.fieldValues.nodes.find(f => 
                f.field && f.field.name === 'Student GitHub'
              );
              if (githubField) {
                console.log(`- ${githubField.text}`);
              }
            });
            
            console.log('=== üèÅ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê ===');
